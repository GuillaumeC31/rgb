{% extends 'base.html.twig' %}

{% block title %}Backoffice{% endblock %}

{% block body %}

{% block styles %}
	<style>
	body{
  background-color:#f2f2f2;

}
h1{
color: #4285F4;
}
.table{
  background-color:#d9d9d9;
}
	</style>
{% endblock styles %}


<div class="container  justify-content-center my-5">
  <div class="row">
    <div class="col justify-content-center">
        <h1 class="text-center my-5">Entreprise</h1>

         <form method="post" class="justify-content-center">
           <h2>{{users.identity}}</h2><br>

         <table class="table">
       <tbody>
          <tr>
           <th>Nom entreprise</th>
            <td>{{users.identity }}</td>
          </tr>


          <tr>
            <th>Adresse</th>
            <td>{{users.adressPro}}</td>
          </tr>

          <tr>
            <th>Code postale</th>
            <td>{{users.zipcodePro}}</td>
          </tr>

          <tr>
            <th>Ville</th>
             <td>{{users.cityPro}}</td>
          </tr>

          <tr>
            <th>Numero de teléphone</th>
            <td>{{users.phonePro}}</td>
         </tr>

          <tr>
            <th>N° Siret </th>
             <td>{{users.siret}}</td>
          </tr>

          <tr>
             <th>N° Siren</th>
              <td>{{users.siren}}</td>
          </tr>

          <tr>
             <th> NIC </th>
            <td>{{users.nic}}</td>
          </tr>

          <tr>
            <th>Code APE </th>
              <td>{{users.apeCode}}</td>
          </tr>

          <tr>
             <th>Email</th>
              <td>{{users.email}}</td>
          </tr>

           <tr>
             <th>Validation manuelle</th>
              <td>
              <div class="custom-control custom-switch">
                <input type="checkbox" name="validate_ape" class="custom-control-input" id="switchAccept" {{ viewAccept }}>
                <label class="custom-control-label" for="switchAccept"></label>
              </div>
            </td>
          </tr>

           <tr>
               <th>Date d'enregistrement</th>
                <td>{{users.dateRegistration|date('d/m/Y  H:i') }}</td>
          </tr>
          </tbody>
        </table>
          <a class="btn btn-outline-warning " href="{{ path('list_valid') }}" class="text-success">Retour</a>
          <a type="submit" class="btn btn-outline-success" href="{{ path('list_valid') }}">Comfirmer</a>
      </form>
    </div>
  </div>
</div>
{% endblock %}


{% block javascripts %}
<script>
$('[name="validate_ape"]').change(function(e){
  var statusCheckbox = $(this).is(':checked');
  console.log('current status : ' + statusCheckbox);



  $.post('{{ path('validate_ape_entreprise') }}', {
    new_status: statusCheckbox,
    id_entreprise: '{{ users.id }}'
  }, function(dataResult){
      // dataResult cocntiendra le resultat de mon script PHP (s'il en renvoi un)
      console.log(dataResult);
  });

});

</script>

{% endblock %}

