{% extends 'base.html.twig' %}

{% block stylesheets %}
{% endblock %}

{% block title %}Accueil{% endblock %}

{% block body %}

    <div class="row">
        <div class="col-lg-4 col-md-12 col-sm-12">
            <div id="calendar">

            </div>

            <div class="mail">
                <form class="form rounded p-3 form-bg" id="mailSend" method="POST">
                <h2 class="text-center text-lead">Envoyer un message à l'administration</h2>
                    <div class="form-group">
                        <label for="title">Objet</label>
                        <input type="text" class="form-control" name="title" id="title">
                        <input type="hidden" name="action" value="sendmessage">
                    </div>

                    <div class="form-group">
                        <label for="content">Message</label>
                        <textarea type="text" class="form-control" placeholder="Entrez votre message..." name="content" id="content" rows="5"></textarea>
                    </div>
                    <div class="d-flex justify-content-around">
                        <button name="submit" type="submit" class="btn btn-primary">Envoyer</button>
                         <a class="mailboxFlip btn btn-danger text-white" name="mailboxFlip" id="mailboxFlip">Boîte de réception</a>
                    </div>



                <div class="d-flex align-content-center flex-column mt-3" id="mailboxToggle">
                    {% for message in reception %}
                        <h2 class="text-center"> {{message.title}}</h2>
                        <ul class="list-group text-center">
                           <li><p class="text-center text-lead">{{message.content}}</p></li>
                        </ul>
                    {% endfor %}
                </div>
            </form>

                <div class="jumbotron d-flex flex-column justify-content-between align-items-center">
                    <div id="jsb_container" class="jsb_holder">

                        <a href="https://fr.jooble.org/" class="cgl" rel="nofollow">Recherche de stage</a>
                    </div>

                    <div class="col-sm-12 col-lg-5 col-md-12 ads">
                        <div class="container">
                            <h2 class="text-center mt-3">Rechercher une entreprise</h2>
                            <div class="d-flex align-items-center p-2">
                                <input type="text" class="form-control" placeholder="Entrez votre recherche">
                                <a class="btn btn-success">
                                    <i class="fa fa-search" class=""></i>
                                </a>
                            </div>
                        </div>
                    </div>


                 </div>

            </div>

            <div class="d-flex justify-content-center">
                <button class="btn btn-success mb-5">Proposer une entreprise</button>
            </div>
        </div>

        <div class="col-sm-12 col-lg-8 col-md-12 mb-5">
            <div class="d-flex justify-content-center profilImage">
                {#<img src="{{asset('assets/uploads/' ~ filePath)}}" alt="" id="profilImage" srcset="">#}
            </div>


<div class="sandbox col-12">


                <div class="d-flex justify-items-center flex-column">
                <h1 class="display-3 d-flex justify-content-center">Vos fichiers</h1>

                    {% embed "filemanager.html.twig" %}

                    {% endembed %}
                </div>
            </div>

        </div>
    </div>

<div class=" actualityDiv mt-5">

        <ul class="col-sm-12 col-lg-12 col-md-12 jumbotron actuality mt-3" id="actuality">


        </ul>

    </div>
{% endblock %}

{% block javascripts %}
<link href="{{asset('assets/packages/core/main.css')}}" rel='stylesheet' />
<link href="{{asset('assets/packages/daygrid/main.css')}}" rel='stylesheet' />
<script src="{{asset('assets/packages/core/main.js')}}"></script>
<script src="{{asset('assets/packages/interaction/main.js')}}"></script>
<script src="{{asset('assets/packages/daygrid/main.js')}}"></script>
<script src="{{asset('assets/packages/core/locales-all.js')}}"></script>
<script src="{{asset('assets/js/calendar.js')}}"></script>
<script src="{{asset('assets/js/calendar.min.js')}}"></script>
<script src="{{asset('assets/js/justFlipIt.min.js')}}"></script>

    <!-- Fin Joobble API recherche -->
    <script type="text/javascript" src="{{asset('assets/js/SearchBox.js')}}" language="javascript"></script>


    <script>

        var searchBox = new JSearchBox('jsb_container', 0, '320', '7', '#0000ff', '#60bf60', '#555555', '#ffffff', '#0000ff', '#555555', '#60bf60', 'Verdana', '11', '#b1b1b3', '', '');


        let pays = 'country=fr';
        let apiKey = "443c627bbe5542c1935e663280a674aa";
        let categorie = 'category=technology'


        let urlAffichage = 'https://newsapi.org/v2/top-headlines?' + pays + '&' + categorie + '&apiKey=' + apiKey;




        fetch(urlAffichage)
            .then(response => response.json())
            .then((json) => {
            let articles = json.articles;
            for (const article of articles) {

                        let titreArticles = document.createElement('h2');    //On créer une nouvelle balise <li>
                        titreArticles.className = "display-3 titres";
                        titreArticles.innerHTML = article.title;    //On lui rajoute du texte
                        let listeTitreArticles = document.querySelector('#actuality');    //On sélectionne une liste
                        listeTitreArticles.appendChild(titreArticles);    //On lui ajoute la balise <li> précédemment créée

                        let contenuArticles = document.createElement('p');    //On créer une nouvelle balise <li>
                        contenuArticles.className = "text-lead content";

                        contenuArticles.innerHTML = article.content;    //On lui rajoute du texte

                        let listeContenuArticles = document.querySelector('#actuality');    //On sélectionne une liste
                        listeContenuArticles.appendChild(contenuArticles);    //On lui ajoute la balise




        };//Fermeture fetch
})



            /*let degreConverti = Math.round(json.main.temp - 273.15);
                document.querySelector("#temperature").innerHTML = degreConverti;
                let metreSecondeEnKM = Math.round(json.wind.speed * 3.6);
                document.querySelector("#vitesseVent").innerHTML = metreSecondeEnKM;
                document.querySelector("#fleche").style.transform = 'rotateZ(' + json.wind.deg + 'deg)';*/

    $(document).ready(function(){


     $('#mailboxFlip').on("click", function(event){
            event.preventDefault();
            $("#mailboxToggle").slideToggle();  //ou slideToggle
        });
    }); // Affichage la boîte de réception quand on clique sur le boutton Boite de réception
    </script>

{% endblock %}
